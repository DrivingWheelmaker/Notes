

![logo for git](./References/Images/git_logo.png)

<img src="./References/Images/branching_illustration.png" alt="img" style="zoom:67%;" />

# How to use git

This note is about git using in group corporation.

Quick direction: [basic commands](#2.3 Basic Commands) and [commands](#3. Using Git)

Or you can directly see: [äººèƒ½çœ‹æ‡‚çš„çš„ç‰ˆæœ¬](#4. Version for Human) ğŸ˜‚

## 1. Basic Knowledge

### 1.1 Background

Linuxä¹‹çˆ¶å°¤çº³æ–¯ä¸ºäº†æ›´å¥½çš„ç®¡ç†ä»–è‡ªå·±çš„å¼€æºé¡¹ç›®linuxç³»ç»Ÿè€Œè‡ªå·±å¼€å‘çš„ä¸€ä¸ªè½¯ä»¶ï¼Œè¿™ä¸ªè½¯ä»¶å¯ä»¥å¸®åŠ©Linuxæ›´å¥½çš„è¿›è¡Œå¼€æºå¼€å‘ï¼Œåå­—å°±å«Gitã€‚ï¼ˆLinusèŠ±äº†ä¸¤å‘¨æ—¶é—´è‡ªå·±ç”¨Cå†™å®Œäº†Gitï¼Œä¸€ä¸ªæœˆä¹‹å†…ï¼ŒLinuxç³»ç»Ÿçš„æºç å·²ç»ç”±Gitç®¡ç†äº†ã€‚ï¼‰

### 1.2 Distributed version control system (åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ)

#### 1.2.1 Verision Control (â€œç‰ˆæœ¬æ§åˆ¶â€çš„æ¦‚å¿µ)

Saving all versions of a file, using certain structure of data, into the storage.

<img src="./References/Images/version_control_illustration.png" style="zoom:50%;" />

The most simple version control is saving copies of the files by yourself ğŸ˜‚ .

 At first there are **Local Version Control Systems** and then came centralized and then distributive.

In git, files that are tracked by git will be made a copy in a hidden `.git` folder. We'll talk about it [later](#About `.git` folder).

####1.2.2 Distributed and Centralized

Git is a distributed version control system (åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ). **Distributed** VS **Centralized**:

![distributive and centralized version control systems](./References/Images/distributive_and_centralized_version_control_systems.png)

### 1.3 Supporting Operation System

Git supports Linux, macOS, and Windows.

On Linux and macOS, git can be directly called from Terminal.

On Windows, git can't be called from cmd.exe, but it provides a BASH emulation (that's **Git Bash**) used to run Git from the command line.

###1.4 Concepts In Git (gitä¸­çš„æ¦‚å¿µåŠåŸç†)

Reference: [Introduction to Git Concepts](https://www.intertech.com/Blog/introduction-to-git-concepts/).

![git concepts diagram](./References/Images/git_concepts_illustration.png)



#### 1.4.1 Workspace (å·¥ä½œåŒº)

It's a folder where all files can be tracked (but also can be not tracked) by git. 

Files stored in this folder can be seen, opened, and edited as normal files.

It's the folder under which you  called `git init`. And it will contain a hiding `.git` folder.

#### 1.4.2 Index and added files

#### 1.4.3 Local Repository (æœ¬åœ°ä»“åº“) and commited files

It's a abstract concept, meaning a repository (ä»“åº“) where all the history versions are stored.

#### 1.4.4 Branch

#### 1.4.5 Reomote Repositories

#### 1.4.6 Tracking



####About `.git` folder

Reference: [how git version control functions](https://blog.csdn.net/wangbaolongaa/article/details/52039447).

In `.git` folder, file copies are actually saved as a compressed type, stored in folders in `.git\objects\`.

All information of this git repository, including staged files, committed files, remote repository location (generated by `git remote add xxx xxxx` command), is stored here (but global configurations like user name and user email address are not). Every repository has its won set of these kinds of information and this information is only for that repository.



## 2. Getting Started

### 2.1 Installation

ç•¥

### 2.2 Basic Settings

####2.2.1 Global Configuration (å…¨å±€é…ç½®)

You need to set some "user information" before you use git. ( Some CSC teachers ignored it ?! )

```command
$ git config --global user.name "Your Name"
$ git config --global user.email "email@example.com"
```

After that, every record made on your computer will be recorded with your account.

Suggestion: use your github email and username even though it may not be necessary.

### 2.3 Basic Commands

#### 2.3.1 add

#### 2.3.2 commit

#### 2.3.3 remote

##### 2.3.3.1 remote add

#### 2.3.4 copy

#### 2.3.5 push

(ä»¥ä¸Šå…¨ç•¥ï¼Œè¯¦è§[3. Using Git](#3. Using Git))





## 3. Using Git

<<<<<<< HEAD
![git](./References/Images/git_command_illustration.png)
=======
### 3.1 Version control commands

####3.1.1 add

Add a file into "staged files".

Example:

```
$ git add filename.txt
```

Or if you are lazy, you can use `.` to represent "all files in the workspace":

```
$ git add .
```

Yes I'm lazy.

####3.1.2 stage

Same usage as `add`.

#### 3.1.3 commit

Commit all the changes (files). A commit action is to commit the added changes and save them as one "edit operation" (ç¡®è®¤ç¼“å­˜åŒºçš„æ‰€æœ‰çš„æ›´æ”¹ï¼Œæ•´ä¸ªå­˜å‚¨ä¸ºä¸€æ¬¡æ“ä½œ). The "edit operation" is called "a commit". The commit will be added to the end of the branch that you are in (è¿™æ¬¡ commit ä¼šæ·»åŠ åˆ°ç»§å½“å‰æ‰€å¤„çš„åˆ†æ”¯çš„æœ«ç«¯).

A discription of the commit should be added, called "commit log". Commit log can be seen when you are checking your commits on your computer, or on remote repository websites like GitHub.

Basical usage: 

```
$ git commit -m "this is a discription of this commit"
```

git commit -a -m â€œmessageâ€:

```
git commit -a -m â€œthis is try to add and commit all tracked filesâ€
```

Add all tracked files and commit. Not recommended because new-created files before last add  command will not be automatically added.

git commit --amend:

```
git commit --amend
```

This is a convenient way to modify the most recent commit. It lets you combine staged changes with the previous commit instead of creating an entirely new commit.

> It can also be used to simply edit the previous commit message without changing its snapshot.

###3.2 Reomote corporation commands

#### 3.2.1 remote

Directly use `git remote` will list all remote computer name (the name you made for it) :

```
$ git remote
origin
```

##### 3.2.1.1 remote -v

List all remote computer with its address.

```
$ git remote -v
origin  git@github.com:jquery/jquery.git (fetch)
origin  git@github.com:jquery/jquery.git (push)
```

##### 3.2.1.2 remote add (make a name for the remote) (remote location)

It's to add information of a new remote repository (remote computer).

Most of the time the central repository (though git is a distributive version control tool, we still need a central one to keep our code always online) is named "origin". But it's just a hobby.

```
$ git remote add origin git@github.com:jquery/jquery.git
```

##### 3.2.1.3 remote rm (remote name)

To remove a remote computer information from this repository.

##### 3.2.1.4 remote rename / remote show

```
$ git remote rename <previous name> <new name>
```

```
$ git remote shwo <name>
```

The `remote show` will list information of certain remote repository.

#### 3.2.2 clone

Clones a repository into a newly created directory, creates remote-tracking branches for each branch in the cloned repository. And creates and checks out an initial branch that is forked from the cloned repositoryâ€™s currently active branch.

(å°†æŸä¸ªrepoå…‹éš†è‡³æœ¬åœ°çš„æ–°repoï¼Œè¿œç«¯repoä¸­çš„æ¯ä¸ªåˆ†æ”¯éƒ½ä¼šåœ¨æœ¬åœ°repoæœ‰ç›¸åº”çš„åˆ†æ”¯ã€‚è‡ªåŠ¨å°†è¿œç«¯repoæœ€è¿‘activeçš„åˆ†æ”¯è®¾ä¸ºåˆå§‹åˆ†æ”¯å¹¶åˆ‡æ¢è‡³æ­¤ã€‚)

After the clone, a plain `git fetch` without arguments will update all the remote-tracking branches, and a `git pull` without arguments will in addition merge the remote master branch into the current master branch

(æ‰€æœ‰çš„åˆ†æ”¯éƒ½ä¼šä¿æŒtrackingï¼Œä¹Ÿå³æ˜¯è¯´å¯ä»¥ç›´æ¥ä¸åŠ å‚æ•°åœ°ä½¿ç”¨[fetch](#3.2.4 fetch)ã€pullã€pushç­‰å‘½ä»¤)

âš ï¸Note that the `git clone` operation doesn't require a git repository exist under current folder. And the new repo is created inside your current folder, witch means you shoud `cd` into the new folder to continue the following operations. 

(æ³¨æ„ï¼š`git clone` æŒ‡ä»¤ä¸éœ€åœ¨repoå†…æ‰§è¡Œï¼Œæ–°çš„repoä¼šåœ¨ä½ å½“å‰çš„å·¥ä½œç›®å½•ä¸‹ç”Ÿæˆï¼Œè¿™æ—¶ä½ éœ€è¦ `cd` åˆ°è¿™ä¸ªæ–°repoä¸­æ‰èƒ½æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ)

Example:

```
$ ls
there_is_nothing.txt
$ git clone git@github.com:CUHK-SZ-SC/mdnmd.git
Cloning into 'mdnmd'...
remote: Enumerating objects: 28, done.
remote: Counting objects: 100% (28/28), done.
remote: Compressing objects: 100% (21/21), done.
remote: Total 28 (delta 4), reused 28 (delta 4), pack-reused 0
Receiving objects: 100% (28/28), 1.04 MiB | 55.00 KiB/s, done.
Resolving deltas: 100% (4/4), done.
$ ls
mdnmd			there_is_nothing.txt
$ cd mdnmd
$ ls
Notes
$ git status
On branch master
Your branch is up to date with 'origin/master'.

nothing to commit, working tree clean
```

#### 3.2.3 push

Push your commits up to remote repositories.

#### 3.2.4 fetch

##### 3.2.4.1 fetch (remote name)

This will get all commits of a remote repository into local repository (but not influence workspace).

For example:

```
$ git fetch remote1
remote: Enumerating objects: 28, done.
remote: Counting objects: 100% (28/28), done.
remote: Compressing objects: 100% (21/21), done.
remote: Total 28 (delta 4), reused 28 (delta 4), pack-reused 0
Unpacking objects: 100% (28/28), done.
From github.com:CUHK-SZ-SC/mdnmd
 * [new branch]      master     -> remote1/master
```



####3.2.5 pull

###3.3 Branch control commands

#### 3.3.1 branch

As a basical command of branch control, it will list all branches in your repository.

Example:

```
$ git branch
* master
```

##### 3.3.1.1 branch (branch name)

It's to create a new branch

Excample:

```
$ git branch test
$ git branch
* master
  test
```

##### 3.3.1.2 branch -d (branchname)

```
$ branch -d test
Deleted branch test (was 77ddf50).
```

Delete a branch.

##### 3.3.1.3 branch -r / branch -a

A `-r` will help show branches from remote repositories.

```
$ git branch -r
  remote1/master
```

And a `-a` will show all the branches both local and remote.

```
$ git branch -a
* master
  test
  remotes/remote1/master
```



#### 3.3.2 checkout

It's to change the branch you are on.

Example:

```
$ git checkout test
Switched to branch 'test'
$ git branch
  master
* test
```

##### 3.3.2.1  checkout -b (branchname)

It's to creat a new branch and change onto it.

##### 3.3.2.2 checkout -b (branchname) (original beanch)

It's to create a new branch from an original branch. It's commenly used when 

####3.3.3 merge

(ç‰ˆæœ¬æ§åˆ¶ä¸­æœ€å¤æ‚çš„è°œä¹‹æ“ä½œï¼Ÿï¼Ÿ)

Directly use of  `git merge` will be explained [later](#Git merge without branch name:).

#####3.3.3.1 git merge (branch name)

Exampleï¼š

```
$ git merge test
Merge made by the 'recursive' strategy.
 2.py | 0
 1 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 2.py
```

with log information:

```
$ git log --oneline
7f7f464 (HEAD -> master) Merge branch 'test'
675b84c (test) add 2.py
88428d8 create 1.py
```

the branch name can be both local or remote. If you just call `git merge`

###### Conflict when handling:

If there are conflicts when merging two branch,git will give `CONFLICT ... Automatic merge failed; fix conflicts and then commit the result.`. Then you should handle the conflict by your self. After handle, you should add and commit again, then git will automatically merge these two branches again and generate a new commit.

(å¦‚æœåœ¨ merge çš„æ—¶å€™é‡åˆ°å†²çª(å¦‚ä¸€ä¸ª branch ä¸­ä¿®æ”¹äº†æŸä¸ªæ–‡ä»¶ï¼Œå¦ä¸€ä¸ª branch å´å°†å…¶åˆ é™¤ï¼›æˆ–ä¸¤ä¸ª branch éƒ½å¯¹æŸä¸ªæ–‡ä»¶çš„åŒä¸€è¡Œå†…å®¹è¿›è¡Œäº†ä¸åŒçš„ä¿®æ”¹)ï¼Œgit ä¼šæŠ¥é”™ã€‚æ­¤æ—¶ä½ éœ€è¦æ‰‹åŠ¨ä¿®æ”¹è§£å†³ä¸¤ä¸ªç‰ˆæœ¬çš„å†²çªã€‚é‡æ–° add commit ä¹‹åï¼Œgit ä¼šè‡ªåŠ¨é‡æ–° mergeï¼Œå¹¶ç”Ÿæˆä¸€æ¬¡æ–°çš„ commit )

Example:

```
$ git branch delete4
$ vim 4
$ git add .
$ git commit -m"edit 4"
[master de8651a] edit 4
 1 file changed, 1 insertion(+)
$ git checkout delete4
Switched to branch 'delete4'
$ rm 4
$ git add .
$ git commit -m "delete 4"
[delete4 546d240] delete 4
 1 file changed, 0 insertions(+), 0 deletions(-)
 delete mode 100644 4
$ git checkout master
Switched to branch 'master'
$ git merge delete4
CONFLICT (modify/delete): 4 deleted in delete4 and modified in HEAD. Version HEAD of 4 left in tree.
Automatic merge failed; fix conflicts and then commit the result.
$ rm 4
$ git add .
$ git commit
[master 8574519] Merge branch 'delete4'
$ git log --oneline
8574519 (HEAD -> master) Merge branch 'delete4'
546d240 (delete4) delete 4
de8651a edit 4
```



###### Git merge without branch name:

Directly a `git merge` will merge the **remote version of your current branch** into your current branch.

## 4. Version for Human ï¼ˆè¯´äººè¯çš„ç‰ˆæœ¬ï¼‰

â€¼ï¸å·æ‡’è­¦å‘Šâ€¼ï¸

æœ¬éƒ¨åˆ†å†™ç»™æ‡’å¾—çœ‹ä¸Šé¢å†…å®¹çš„äººã€‚

é¦–å…ˆï¼Œè¿˜æ˜¯å»ºè®®ä½ æŠŠ[1. ä¸€äº›èƒŒæ™¯çŸ¥è¯†](#1. Basic Knowledge)çœ‹ä¸€çœ‹ã€‚å°¤å…¶æ˜¯å…³äº[git ä¸­å¸¸è§çš„æ¦‚å¿µ](#1.4 Concepts In Git (gitä¸­çš„æ¦‚å¿µåŠåŸç†))è¿™ä¸€å°éƒ¨åˆ†ã€‚

ä½¿ç”¨gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œè¿œç¨‹åä½œçš„å¤§å¤šæ•°æƒ…å†µï¼Œå…¶å®å°±æ˜¯ï¼š**(å¯ä»¥å¿½ç•¥4.4)**

### 4.1 å¼€å§‹ä¸€ä¸ªgitä»“åº“

#### åœºæ™¯ä¸€ï¼šåˆ›å»ºæœ¬åœ°repoï¼Œæ¨è‡³è¿œç«¯ç©ºrepo

1. åœ¨ä½ æƒ³ä½œä¸ºworkspaceçš„æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ git initã€‚
2. add å’Œcommit è¿™ä¸¤ä¸ªåŸºæœ¬å‘½ä»¤æ¥æŠŠåˆå§‹ä¿®æ”¹æ·»åŠ åˆ°æœ¬åœ°repoé‡Œã€‚
3. git remote add æ·»åŠ ä¸€ä¸ªè¿œç«¯ä»“åº“ä¿¡æ¯ï¼ˆremote repoï¼‰
4. `git push -u origin master`  or `git push --set-upstream origin master`, ç„¶åä¿¡æ¯å°±ä¼šè¢«ä¸Šä¼ åˆ°è¿œç«¯ä»“åº“ï¼Œå¹¶ä¸”æœ¬åœ°çš„masteråˆ†æ”¯ä¼šä¸è¿œç«¯ä»“åº“çš„masteråˆ†æ”¯å»ºç«‹è”ç³»ã€‚

#### åœºæ™¯äºŒï¼šå‚ä¸æŸä¸ªå·²æœ‰çš„è¿œç«¯repo

1. æ— éœ€ init ï¼Œé¦–å…ˆç”¨ git clone + (remote address) æŠŠæ•´ä¸ªè¿œç«¯repoæ‹‰åˆ°æœ¬åœ°æˆä¸ºæœ¬åœ°repoã€‚æ­¤æ—¶cdåˆ°repoç›®å½•ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°repoä¸­å·²ç» init äº† git å¹¶æœ‰äº†ä¸€ä¸ªè‡ªåŠ¨å‘½åä¸ºorigin çš„remoteã€‚è¯¦æƒ…è¯·è§[3.2.2 cloneæŒ‡ä»¤](#3.2.2 clone).

[ä¸ï¼Œæˆ‘æƒ³å­¦ä¸ªæ›´åäººç±»çš„æ–¹æ³•](#4.4.1 pull a remote repo into an empty local repo)ï¼Œ[æˆ–è€…è¶…çº§åäººç±»çš„æ–¹æ³•](#4.4.1 pull a remote repo into an local repo with existing branches)

### 4.2 è¿›è¡Œæœ¬åœ°å·¥ä½œ

1. add å’Œ commit æ·»åŠ ä½ çš„ä¿®æ”¹
2. checkout æ“ä½œåœ¨ä¸åŒbranch é—´åˆ‡æ¢ï¼Œmerge æ“ä½œæ¥è¿›è¡Œbranchä¹‹é—´çš„åˆå¹¶ ([è¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿï¼](3.3 Branch control commands))

### 4.3 å°†ä½ çš„å·¥ä½œæäº¤ç»™è¿œç«¯

#### åœºæ™¯ä¸€ï¼šå…¶ä»–äººå¾ˆæ‡’ï¼Œåœ¨ä½ å¹²æ´»çš„æ—¶å€™ä»€ä¹ˆéƒ½æ²¡å¹²

1. git push
2. ä¸Š bilibili å…³æ³¨ @DLæ˜Š å’Œ @å¨åˆ©æ—ºå¡Desï¼Œå¹¶ç»™ä»–ä»¬ç´ è´¨ä¸‰è¿

#### åœºæ™¯äºŒï¼šremote æœ‰äº†æ–° commit

1. git push ä¼šæç¤ºä½ :

   ```
   To xxxxx
    ! [rejected]        master -> master (fetch first)
   error: failed to push some refs to 'xxxxx'
   hint: Updates were rejected because the remote contains work that you do
   hint: not have locally. This is usually caused by another repository pushing
   hint: to the same ref. You may want to first integrate the remote changes
   hint: (e.g., 'git pull ...') before pushing again.
   hint: See the 'Note about fast-forwards' in 'git push --help' for details.
   ```

   è¿™å°±è¯´æ˜ä½ çš„ä¼™ä¼´å¾ˆå‹¤å‹‰ï¼Œå·²ç»æœ‰äº†æ–°çš„commitã€‚[ä½ è¿˜çœŸæ˜¯æ€ æƒ°å‘¢](https://www.bilibili.com/bangumi/play/ep307063?from=search&seid=4183321439332572774)ï¼Œæ¯”ä¼™ä¼´è½åäº†å‡ ä¸ªcommitã€‚

2. è¿™æ—¶ä½ éœ€è¦åŒæ­¥ä¸€ä¸‹ä½ å’Œ remote çš„å†…å®¹, `fetch` + `merge` æˆ–è€…ç›´æ¥ä¸€ä¸ª `pull` éƒ½å¯ä»¥ï¼Œä¾‹å¦‚ï¼š

   ```
   $ git pull
   ```

   ä¸å‡ºæ„å¤–çš„è¯ç»™å‡ºçš„ä¿¡æ¯å¤§æ¦‚å°±æ˜¯è¿™æ ·çš„ï¼š([woops, æˆ‘è¿˜çœŸå°±å‡ºæ„å¤–äº†æ€ä¹ˆåŠ](#åœºæ™¯ä¸‰ï¼šä½ ä¸è¿œç«¯çš„å·¥ä½œå‡ºç°äº†å†²çª))

   ```
   remote: Enumerating objects: 11, done.
   remote: Counting objects: 100% (11/11), done.
   remote: Compressing objects: 100% (8/8), done.
   remote: Total 10 (delta 0), reused 10 (delta 0), pack-reused 0
   Unpacking objects: 100% (10/10), done.
   From xxxxxxxxxxxx
      76f5065..7dd2550  master     -> origin/master
   Updating 76f5065..7dd2550
   Fast-forward
    5   | 0
    aaa | 0
    2 files changed, 0 insertions(+), 0 deletions(-)
    create mode 100644 xxx
    create mode 100644 xxxxx
   ```

3. ç°åœ¨ä½ å·²ç»å°†åŒä¼´çš„å·¥ä½œæ•´åˆè¿›è‡ªå·±çš„å·¥ä½œäº†ï¼Œå¯ä»¥æ­£å¸¸pushäº†

#### åœºæ™¯ä¸‰ï¼šä¸è¿œç«¯çš„å·¥ä½œå‡ºç°äº†å†²çª

å½“pullæˆ–mergeçš„æ—¶å€™å‡ºç°äº†è¿™æ ·çš„æŠ¥é”™ï¼Œå°±è¯´æ˜å‡ºç°äº†å†²çªï¼š

```
CONFLICT (modify/delete): xxx deleted in a42d92ff95506b6daa349351cbdffe1c8d431812 and modified in HEAD. Version HEAD of xxxx left in tree.
Automatic merge failed; fix conflicts and then commit the result.
```

æ¯”å¦‚è¿œç«¯ä»“åº“æœ‰ä¸€ç¯‡æ²¡å®Œæˆçš„GitTutorialï¼Œä½ åœ¨æœ¬åœ°ç²¾å¿ƒå†™å®Œäº†å®ƒï¼Œç„¶åpushçš„æ—¶å€™å‘ç°å‘¢çš„ç¥å¥‡é˜Ÿå‹å·²ç»åœ¨ä¸€æ¬¡commitä¸­æŠŠå®ƒç»™åˆ äº†ï¼Œè¿™æ—¶å°±æ¶‰åŠåˆ°äº†å†²çªå¤„ç†ã€‚[è¯¦è§3.3.3.1 git merge: Conflict when handling](#Conflict when handling:).

æ ¹æ®æŠ¥é”™çš„å­—é¢æ„æ€ï¼Œæˆ‘ä»¬å»ä¿®æ”¹å†²çªçš„éƒ¨åˆ†ï¼Œç„¶åé‡æ–°add commitä¸€ä¸‹ï¼Œå°±è‡ªåŠ¨é‡æ–°mergeäº†(æ¯”å¦‚ä¸Šè¿°ä¾‹å­ä½ å°±ä»€ä¹ˆéƒ½ä¸ç”¨æ”¹ç›´æ¥ add å’Œ commit)ã€‚ä¹‹åå°±å¯ä»¥ç»§ç»­æ­£å¸¸pushäº†ã€‚

### 4.4 å…¶ä»–æƒ…å†µ 

#### 4.4.1 pull a remote repo into an empty local repo

1. First you need to have a local repo: `git init`

2. Use `remote add` to add a remote info.

3. Use `fetch` to get all branches from remote. Now it's like:

   ```
   $ git branch -a
     remotes/origin/master
   ```

4. Use `checkout -b` to create a new branch which is up-tp-stream with original branch on remote.

   ```
   $ git checkout -b master origin/master
   Branch 'master' set up to track remote branch 'master' from 'origin'.
   Already on 'master'
   ```

   

#### 4.4.1 pull a remote repo into an local repo with existing branches

1. First you need to have a local repo with existing commits, to that you will have at least a master branch.

   now your repository should look like this:

   ```
   $ git branch -a
   * master
   ```

2. Use `remote add` to add a remote info.

3. Use `fetch` to get all branches from remote. Now it's like:

   ```
   $ git branch -a
   * master
     remotes/origin/master
   ```

4. `merge` them using `--allow-unrelated-histories`

   ```
   $ git merge origin/master --allow-unrelated-histories -m "merge local to origin"
   Merge made by the 'recursive' strategy.
    init | 0
    1 file changed, 0 insertions(+), 0 deletions(-)
    create mode 100644 init
   ```

5. set your branch up to stream

   ```
   $ git branch --set-upstream-to=origin/master master
   Branch 'master' set up to track remote branch 'master' from 'origin'.
   ```

   

